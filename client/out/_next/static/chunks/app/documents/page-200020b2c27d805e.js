(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[875],{8761:(e,t,s)=>{Promise.resolve().then(s.bind(s,7315))},7315:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var l=s(5155),r=s(2115),a=s(6046);function n(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[i,o]=(0,r.useState)(""),[c,d]=(0,r.useState)("original"),[m,u]=(0,r.useState)(null),[x,h]=(0,r.useState)(null),b=(0,a.useRouter)();(0,r.useEffect)(()=>{let e=localStorage.getItem("token");if(!e){b.push("/auth");return}fetch("http://localhost:5000/api/auth/profile-with-timestamps",{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>e.json()).then(e=>{e.documents?t(e.documents):o("No documents found")}).catch(()=>o("Failed to load documents")).finally(()=>n(!1))},[b]);let g=(e,t)=>{navigator.clipboard.writeText(e),u(t),setTimeout(()=>u(null),2e3)},p=e=>e?e.replace(/\\n/g,"<br />").replace(/\\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/\\"/g,'"'):"";return s?(0,l.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):i?(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-cyan-50 flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md max-w-md w-full text-center",children:[(0,l.jsx)("div",{className:"text-red-500 mb-4",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,l.jsx)("p",{className:"text-gray-700 text-lg",children:i}),(0,l.jsx)("button",{onClick:()=>b.push("/"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Return Home"})]})}):(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-cyan-50 p-4 md:p-8",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,l.jsxs)("button",{onClick:()=>b.push("/"),className:"mb-6 flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:[(0,l.jsx)("i",{className:"ri-arrow-left-line mr-2"}),"Back to Home"]}),(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"My Documents Timeline"}),(0,l.jsx)("p",{className:"text-gray-600",children:"View and manage your uploaded documents"})]}),(0,l.jsx)("div",{className:"flex justify-center mb-8",children:(0,l.jsxs)("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:[(0,l.jsxs)("button",{onClick:()=>d("original"),className:"px-4 py-2 text-sm font-medium rounded-l-lg border border-gray-200 ".concat("original"===c?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:[(0,l.jsx)("i",{className:"ri-file-text-line mr-2"}),"View Original"]}),(0,l.jsxs)("button",{onClick:()=>d("json"),className:"px-4 py-2 text-sm font-medium rounded-r-lg border border-gray-200 ".concat("json"===c?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:[(0,l.jsx)("i",{className:"ri-code-line mr-2"}),"View JSON"]})]})}),e.length>0?(0,l.jsx)("div",{className:"space-y-8",children:e.map((t,s)=>{let r=t.path.split("\\").pop()||t.path.split("/").pop();return(0,l.jsxs)("div",{className:"relative pl-8",children:[(0,l.jsxs)("div",{className:"absolute left-0 top-0 h-full flex flex-col items-center",children:[(0,l.jsx)("div",{className:"w-4 h-4 bg-blue-600 rounded-full flex items-center justify-center z-10",children:(0,l.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})}),s<e.length-1&&(0,l.jsx)("div",{className:"w-0.5 h-full bg-blue-300"})]}),(0,l.jsxs)("div",{className:"bg-white p-5 rounded-xl shadow-sm hover:shadow-md transition-shadow border border-gray-100",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:r}),(0,l.jsxs)("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded",children:[new Date(t.timestamp).toLocaleDateString()," at ",new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),"original"===c?(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsxs)("a",{href:"http://localhost:5000/".concat(t.path),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100 transition-colors",children:[(0,l.jsx)("i",{className:"ri-eye-line mr-2"}),"View Document"]})}):(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsxs)("button",{onClick:()=>h(x===s?null:s),className:"inline-flex items-center px-4 py-2 bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100 transition-colors",children:[(0,l.jsx)("i",{className:"ri-eye-line mr-2"}),"View JSON"]}),x===s&&t.jsonData&&(0,l.jsxs)("div",{className:"relative mt-4",children:[(0,l.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto",children:(0,l.jsx)("pre",{className:"text-sm text-gray-800 font-mono",dangerouslySetInnerHTML:{__html:p(t.jsonData.text)}})}),(0,l.jsx)("button",{onClick:()=>g(JSON.stringify(t.jsonData,null,2),s),className:"absolute top-2 right-2 p-2 text-gray-500 hover:text-gray-700 transition-colors",title:"Copy JSON",children:m===s?(0,l.jsx)("i",{className:"ri-check-line text-green-500"}):(0,l.jsx)("i",{className:"ri-file-copy-line"})})]})]})]})]},s)})}):(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"mx-auto w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:(0,l.jsx)("i",{className:"ri-folder-open-line text-3xl text-blue-600"})}),(0,l.jsx)("h3",{className:"text-xl font-medium text-gray-700 mb-2",children:"No documents yet"}),(0,l.jsx)("p",{className:"text-gray-500 mb-4",children:"Upload your first document to get started"}),(0,l.jsxs)("button",{onClick:()=>b.push("/upload"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center",children:[(0,l.jsx)("i",{className:"ri-upload-cloud-line mr-2"}),"Upload Document"]})]})]})})}},6046:(e,t,s)=>{"use strict";var l=s(6658);s.o(l,"useRouter")&&s.d(t,{useRouter:function(){return l.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(8761)),_N_E=e.O()}]);