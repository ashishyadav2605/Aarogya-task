(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[994],{8415:(e,t,s)=>{Promise.resolve().then(s.bind(s,7798))},7798:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var l=s(5155),r=s(2115),a=s(6046);function n(){let[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)(""),[i,c]=(0,r.useState)(""),[o,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(!1),[x,f]=(0,r.useState)(!1),h=(0,a.useRouter)(),p=(0,r.useRef)(null),g=e=>{e&&(t(e),n(e.name),c(""),d(""),f(!1))},b=async s=>{if(s.preventDefault(),!e){c("Please select a file to upload");return}let l=localStorage.getItem("token");if(!l){c("Please log in to upload documents"),h.push("/auth");return}m(!0),c(""),d("");let r=new FormData;r.append("document",e);try{let e=await fetch("https://aarogya-task.onrender.com/api/auth/upload",{method:"POST",headers:{Authorization:"Bearer ".concat(l)},body:r}),s=await e.json();if(!e.ok)throw Error(s.message||"Upload failed");d("Document uploaded successfully!"),f(!0),t(null),n(""),p.current&&(p.current.value="")}catch(e){c(e.message)}finally{m(!1)}};return(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-cyan-50 flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-md border border-gray-100",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)("button",{onClick:()=>h.push("/"),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors mr-4",children:(0,l.jsx)("i",{className:"ri-arrow-left-line text-xl"})}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Upload Document"})]}),(0,l.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-2",onDragOver:e=>{e.preventDefault()},onDrop:e=>{e.preventDefault(),e.dataTransfer.files&&e.dataTransfer.files.length>0&&(g(e.dataTransfer.files[0]),e.dataTransfer.clearData())},children:[(0,l.jsx)("label",{htmlFor:"fileInput",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select a document"}),(0,l.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,l.jsxs)("label",{htmlFor:"fileInput",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,l.jsx)("i",{className:"ri-upload-cloud-2-line text-3xl text-blue-500 mb-2"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:s||(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]})}),s&&(0,l.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[Math.round(e.size/1024)," KB"]})]}),(0,l.jsx)("input",{id:"fileInput",type:"file",onChange:e=>{g(e.target.files[0])},className:"hidden",ref:p})]})})]}),i&&(0,l.jsxs)("div",{className:"flex items-center p-4 text-sm text-red-700 bg-red-100 rounded-lg",children:[(0,l.jsx)("i",{className:"ri-error-warning-line mr-2"}),i]}),o&&(0,l.jsxs)("div",{className:"flex items-center p-4 text-sm text-green-700 bg-green-100 rounded-lg",children:[(0,l.jsx)("i",{className:"ri-checkbox-circle-line mr-2"}),o]}),(0,l.jsx)("button",{type:"submit",disabled:u||!e||x,className:"w-full flex items-center justify-center py-3 px-4 rounded-lg font-medium transition-colors ".concat(u||!e||x?"bg-gray-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),children:u?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Uploading..."]}):x?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("i",{className:"ri-check-line mr-2"}),"Upload Complete"]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("i",{className:"ri-upload-line mr-2"}),"Upload Document"]})})]}),(0,l.jsxs)("div",{className:"mt-6 text-center text-sm text-gray-500",children:[(0,l.jsx)("p",{children:"Supported formats: PDF, DOCX, JPG, PNG"}),(0,l.jsx)("p",{className:"mt-1",children:"Max file size: 5MB"})]})]})})}},6046:(e,t,s)=>{"use strict";var l=s(6658);s.o(l,"useRouter")&&s.d(t,{useRouter:function(){return l.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(8415)),_N_E=e.O()}]);